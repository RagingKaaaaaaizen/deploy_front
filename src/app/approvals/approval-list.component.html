<div class="list-container">
  <div class="container-fluid">
    <!-- Page Header -->
    <div class="page-header">
      <div class="header-content">
        <div class="header-title">
          <i class="fas fa-clipboard-check"></i>
          <div>
            <h1 class="page-title">Approval Requests</h1>
            <p class="page-subtitle">Review and manage pending requests</p>
          </div>
        </div>
        <div class="header-actions" *ngIf="hasRole([Role.Staff])">
          <a routerLink="/approvals/my-requests" class="btn btn-secondary">
            <i class="fas fa-user"></i>
            My Requests
          </a>
        </div>
      </div>
    </div>

    <!-- Statistics -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon pending">
          <i class="fas fa-clock"></i>
        </div>
        <div class="stat-number pending">{{ stats.pending }}</div>
        <div class="stat-label">Pending Requests</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon approved">
          <i class="fas fa-check-circle"></i>
        </div>
        <div class="stat-number approved">{{ stats.approved }}</div>
        <div class="stat-label">Approved Requests</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon rejected">
          <i class="fas fa-times-circle"></i>
        </div>
        <div class="stat-number rejected">{{ stats.rejected }}</div>
        <div class="stat-label">Rejected Requests</div>
      </div>
    </div>

    <!-- Filter Buttons -->
    <div class="filter-section">
      <div class="filter-buttons">
        <button class="btn btn-filter" 
                [class.active]="currentFilter === 'all'"
                (click)="setFilter('all')">
          <i class="fas fa-list"></i>
          All ({{ stats.pending + stats.approved + stats.rejected }})
        </button>
        <button class="btn btn-filter" 
                [class.active]="currentFilter === 'pending'"
                (click)="setFilter('pending')">
          <i class="fas fa-clock"></i>
          Pending ({{ stats.pending }})
        </button>
        <button class="btn btn-filter" 
                [class.active]="currentFilter === 'approved'"
                (click)="setFilter('approved')">
          <i class="fas fa-check"></i>
          Approved ({{ stats.approved }})
        </button>
        <button class="btn btn-filter" 
                [class.active]="currentFilter === 'rejected'"
                (click)="setFilter('rejected')">
          <i class="fas fa-times"></i>
          Rejected ({{ stats.rejected }})
        </button>
      </div>
    </div>

    <!-- Requests List -->
    <div class="requests-container">
      <div class="requests-header">
        <h2 class="requests-title">
          <i class="fas fa-list"></i>
          {{ getFilterTitle() }}
        </h2>
        <button class="btn btn-primary" (click)="loadApprovalRequests()">
          <i class="fas fa-sync-alt"></i>
          Refresh
        </button>
      </div>

      <!-- Loading State -->
      <div *ngIf="loading" class="loading">
        <i class="fas fa-spinner"></i>
        <p>Loading approval requests...</p>
      </div>

      <!-- Empty State -->
      <div *ngIf="!loading && getFilteredRequests().length === 0" class="empty-state">
        <i class="fas fa-clipboard-list"></i>
        <h3>No {{ getFilterTitle() }}</h3>
        <p>There are no {{ getFilterTitle().toLowerCase() }} to review at this time.</p>
      </div>

      <!-- Requests List -->
      <div *ngIf="!loading && getFilteredRequests().length > 0">
        <div *ngFor="let request of getFilteredRequests()" class="request-item">
          <div class="request-header">
            <div class="request-type">
              <i [class]="getTypeIcon(request.type)"></i>
              {{ getTypeLabel(request.type) }}
            </div>
            <span class="request-status" [class]="getStatusClass(request.status)">
              {{ request.status }}
            </span>
          </div>

          <div class="request-info">
            <div class="info-item">
              <div class="info-label">Requested By</div>
              <div class="info-value">
                {{ request.creator?.firstName }} {{ request.creator?.lastName }}
              </div>
            </div>
            <div class="info-item">
              <div class="info-label">Created</div>
              <div class="info-value">{{ formatDate(request.createdAt!) }}</div>
            </div>
            <div class="info-item" *ngIf="request.approvedBy">
              <div class="info-label">Processed By</div>
              <div class="info-value">
                {{ request.approver?.firstName }} {{ request.approver?.lastName }}
              </div>
            </div>
            <div class="info-item" *ngIf="request.approvedAt">
              <div class="info-label">Processed</div>
              <div class="info-value">{{ formatDate(request.approvedAt) }}</div>
            </div>
          </div>

          <div class="request-actions">
            <button class="btn btn-primary" (click)="viewRequest(request)">
              <i class="fas fa-eye"></i>
              View Details
            </button>
            <button 
              *ngIf="request.status === 'pending'" 
              class="btn btn-success" 
              (click)="approveRequest(request)">
              <i class="fas fa-check"></i>
              Approve
            </button>
            <button 
              *ngIf="request.status === 'pending'" 
              class="btn btn-danger" 
              (click)="rejectRequest(request)">
              <i class="fas fa-times"></i>
              Reject
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
