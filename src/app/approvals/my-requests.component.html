<div class="min-h-screen bg-gradient-to-br from-gray-50 to-gray-200 py-8">
  <div class="max-w-7xl mx-auto px-4">
    <!-- Page Header -->
    <div class="bg-white rounded-2xl shadow-lg mb-8 overflow-hidden">
      <div class="bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-8 py-6">
        <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4">
          <div class="flex items-center">
            <div class="w-16 h-16 bg-white/20 text-white rounded-full flex items-center justify-center mr-4 text-2xl">
              <i class="fas fa-user-clock"></i>
            </div>
            <div>
              <h1 class="text-3xl font-black text-white font-akira mb-1">My Requests</h1>
              <p class="text-white/80 font-inter">Track the status of your submitted requests</p>
            </div>
          </div>
          <div *ngIf="hasRole([Role.SuperAdmin, Role.Admin])">
            <a routerLink="/approvals" class="inline-flex items-center justify-center rounded-md px-4 py-2 font-semibold transition bg-white/20 hover:bg-white/30 text-white">
              <i class="fas fa-clipboard-check mr-2"></i>
              All Requests
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Statistics -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon pending">
          <i class="fas fa-clock"></i>
        </div>
        <div class="stat-number pending">{{ stats.pending }}</div>
        <div class="stat-label">Pending Requests</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon approved">
          <i class="fas fa-check-circle"></i>
        </div>
        <div class="stat-number approved">{{ stats.approved }}</div>
        <div class="stat-label">Approved Requests</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon rejected">
          <i class="fas fa-times-circle"></i>
        </div>
        <div class="stat-number rejected">{{ stats.rejected }}</div>
        <div class="stat-label">Rejected Requests</div>
      </div>
    </div>

    <!-- Requests List -->
    <div class="requests-container">
      <div class="requests-header">
        <h2 class="requests-title">
          <i class="fas fa-list"></i>
          My Submitted Requests
        </h2>
        <button class="btn btn-primary" (click)="loadMyRequests()">
          <i class="fas fa-sync-alt"></i>
          Refresh
        </button>
      </div>

      <!-- Loading State -->
      <div *ngIf="loading" class="loading">
        <i class="fas fa-spinner"></i>
        <p>Loading your requests...</p>
      </div>

      <!-- Empty State -->
      <div *ngIf="!loading && myRequests.length === 0" class="empty-state">
        <i class="fas fa-clipboard-list"></i>
        <h3>No Requests Submitted</h3>
        <p>You haven't submitted any approval requests yet.</p>
      </div>

      <!-- Requests List -->
      <div *ngIf="!loading && myRequests.length > 0">
        <div *ngFor="let request of myRequests" class="request-item">
          <div class="request-header">
            <div class="request-type">
              <i [class]="getTypeIcon(request.type)"></i>
              {{ getTypeLabel(request.type) }}
            </div>
            <span class="request-status" [class]="getStatusClass(request.status)">
              {{ request.status }}
            </span>
          </div>

          <div class="request-info">
            <div class="info-item">
              <div class="info-label">Submitted</div>
              <div class="info-value">{{ formatDate(request.createdAt!) }}</div>
            </div>
            <div class="info-item" *ngIf="request.approvedBy">
              <div class="info-label">Processed By</div>
              <div class="info-value">
                {{ request.approver?.firstName }} {{ request.approver?.lastName }}
              </div>
            </div>
            <div class="info-item" *ngIf="request.approvedAt">
              <div class="info-label">Processed</div>
              <div class="info-value">{{ formatDate(request.approvedAt) }}</div>
            </div>
          </div>

          <!-- Rejection Reason -->
          <div *ngIf="request.status === 'rejected' && request.rejectionReason" class="rejection-reason">
            <h5><i class="fas fa-exclamation-triangle"></i> Rejection Reason</h5>
            <p>{{ request.rejectionReason }}</p>
          </div>

          <div class="request-actions">
            <button class="btn btn-primary" (click)="viewRequest(request)">
              <i class="fas fa-eye"></i>
              View Details
            </button>
            <button 
              *ngIf="canDelete(request)" 
              class="btn btn-danger" 
              (click)="deleteRequest(request)">
              <i class="fas fa-trash"></i>
              Delete
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
