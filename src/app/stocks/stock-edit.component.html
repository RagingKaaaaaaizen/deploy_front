<div class="container mt-3">
  <h3>{{ isEdit ? 'Edit Stock' : 'Add Stock' }}</h3>

  <form (ngSubmit)="save()" #stockForm="ngForm">
    <!-- Item dropdown (with category name) -->
    <div class="mb-3">
      <label>Item</label>
      <select class="form-control" [(ngModel)]="stock.itemId" name="itemId" required>
        <option value="" disabled>Select Item</option>
        <option *ngFor="let item of items" [value]="item.id">{{ item.name }}</option>
      </select>
    </div>

    <!-- Quantity -->
    <div class="mb-3">
      <label>Quantity</label>
      <input 
        type="number" 
        class="form-control" 
        [(ngModel)]="stock.quantity" 
        name="quantity" 
        required
        (input)="calculateTotalPrice()">
    </div>

    <!-- Price -->
    <div class="mb-3">
      <label>Price (per item)</label>
      <input 
        type="number" 
        class="form-control" 
        [(ngModel)]="stock.price" 
        name="price" 
        step="0.01"
        required
        (input)="calculateTotalPrice()">
    </div>

    <!-- Total Price (readonly) -->
    <div class="mb-3">
      <label>Total Price</label>
      <input 
        type="number" 
        class="form-control" 
        [value]="stock.totalPrice || 0" 
        readonly>
    </div>

    <!-- Type -->
    <div class="mb-3">
      <label>Type</label>
      <select class="form-control" [(ngModel)]="stock.type" name="type" required>
        <option value="ADD">Add</option>
        <option value="DISPOSE">Dispose</option>
      </select>
    </div>

    <!-- Location (Dropdown) -->
    <div class="mb-3">
      <label>Storage Location</label>
      <select class="form-control" [(ngModel)]="stock.locationId" name="locationId" required>
        <option value="" disabled>Select Location</option>
        <option *ngFor="let loc of locations" [value]="loc.id">{{ loc.name }}</option>
      </select>
    </div>

    <!-- Remarks -->
    <div class="mb-3">
      <label>Remarks</label>
      <textarea class="form-control" [(ngModel)]="stock.remarks" name="remarks"></textarea>
    </div>

    <button type="submit" class="btn btn-success">Save</button>
    <a routerLink="/stocks" class="btn btn-secondary ms-2">Cancel</a>
  </form>
</div>
