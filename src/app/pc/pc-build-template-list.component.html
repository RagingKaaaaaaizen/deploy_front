<div class="container-fluid list-container">
    <!-- Header -->
    <div class="page-header">
        <div class="header-content">
            <div class="header-title">
                <i class="fas fa-clipboard-list"></i>
                <div>
                    <h1 class="page-title">PC Build Templates</h1>
                    <p class="page-subtitle">Manage standard PC configurations</p>
                </div>
            </div>
            <div class="header-actions">
                <button class="btn btn-outline-secondary" routerLink="/pc">
                    <i class="fas fa-arrow-left"></i> Back to PCs
                </button>
                <button class="btn btn-success" (click)="addTemplate()" *ngIf="hasRole([Role.SuperAdmin, Role.Admin])">
                    <i class="fas fa-plus"></i> Create Template
                </button>
            </div>
        </div>
    </div>

    <!-- Search -->
    <div class="filters-section">
        <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" 
                   class="form-control" 
                   placeholder="Search templates by name or description..."
                   [(ngModel)]="searchTerm"
                   (input)="onSearch()">
        </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="text-center p-5">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>

    <!-- Templates Grid -->
    <div class="row" *ngIf="!loading">
        <div class="col-md-6 col-lg-4 mb-4" *ngFor="let template of filteredTemplates">
            <div class="card template-card">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="fas fa-clipboard-check text-primary"></i>
                        {{ template.name }}
                    </h5>
                    <p class="card-text text-muted">
                        {{ template.description || 'No description' }}
                    </p>
                    <div class="template-meta">
                        <span class="badge bg-info">
                            <i class="fas fa-microchip"></i>
                            {{ template.components?.length || 0 }} components
                        </span>
                        <span class="text-muted small">
                            <i class="fas fa-calendar"></i>
                            {{ template.createdAt | date:'short' }}
                        </span>
                    </div>
                </div>
                <div class="card-footer">
                    <div class="action-buttons">
                        <button class="btn btn-sm btn-info" (click)="viewTemplate(template.id!)" title="View Details">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="btn btn-sm btn-primary" (click)="viewStats(template.id!)" title="View Statistics">
                            <i class="fas fa-chart-bar"></i>
                        </button>
                        <button class="btn btn-sm btn-warning" (click)="editTemplate(template.id!)" *ngIf="hasRole([Role.SuperAdmin, Role.Admin])" title="Edit">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-sm btn-secondary" (click)="duplicateTemplate(template)" *ngIf="hasRole([Role.SuperAdmin, Role.Admin])" title="Duplicate">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="btn btn-sm btn-danger" (click)="deleteTemplate(template)" *ngIf="hasRole([Role.SuperAdmin, Role.Admin])" title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Empty State -->
    <div class="empty-state" *ngIf="!loading && filteredTemplates.length === 0">
        <i class="fas fa-clipboard-list"></i>
        <h4>No Templates Found</h4>
        <p>Create your first PC build template to get started</p>
        <button class="btn btn-primary" (click)="addTemplate()" *ngIf="hasRole([Role.SuperAdmin, Role.Admin])">
            <i class="fas fa-plus"></i> Create Template
        </button>
    </div>
</div>

